*{box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;margin:0;background:linear-gradient(135deg,#eaf4ff,#ffffff);color:#222}
header{background-image: url('../img/header_pattern.svg'), linear-gradient(135deg,#004080,#0a84ff); background-size: 280px auto, cover; background-repeat: repeat, no-repeat; background-position: center;color:#fff;padding:22px;text-align:center}
header h1{margin:0 0 6px}
nav a{color:#ffcc66;margin:0 10px;text-decoration:none;font-weight:700}
#global-search{margin-top:10px}
#global-search input{padding:10px 14px;border-radius:20px;border:none;min-width:280px;box-shadow:0 2px 6px rgba(0,0,0,.15)}
main{padding:18px;display:grid;gap:18px}
section{background:#fff;border-radius:14px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.card{background:#eef6ff;border-radius:12px;padding:12px;text-align:center}
.card:hover{background:#dff0ff}
footer{background:#004080;color:#fff;text-align:center;padding:12px;margin-top:18px}
.badge{display:inline-block;padding:4px 8px;border-radius:12px;background:#eff6ff;color:#0b5dc2;margin-bottom:8px;font-size:.75em;font-weight:700}
/* glossary */
.tabs{display:flex;gap:8px;justify-content:center;margin:14px 0}
.tab{background:#e6f2ff;border:none;padding:10px 16px;border-radius:20px;cursor:pointer;font-weight:600;color:#004080}
.tab.active{background:#ffd24d;color:#2a2000}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
.card-g{background:#fff;border-radius:12px;padding:14px;box-shadow:0 4px 10px rgba(0,0,0,.08);cursor:pointer}
/* modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
.modal-content{background:#fff;max-width:900px;width:100%;border-radius:14px;padding:20px;position:relative;display:grid;grid-template-columns:1fr 320px;gap:16px}
.close{position:absolute;right:12px;top:10px;cursor:pointer;font-size:20px;color:#666}
.modal-content h2{margin:0 0 6px}
.modal-content .section{margin:8px 0}
.kv{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.kv .chip{background:#f3f7ff;border:1px solid #d7e6ff;color:#0b5dc2;border-radius:12px;padding:3px 8px;font-size:.8em}
.modal-content img{width:100%;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.15)}
.rightcol{align-self:start}
.small{color:#666;font-size:.85em}

/* rankings */
.rank-wrap{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin-top:10px}
.rank-card{background:#fff;border-radius:12px;padding:12px;box-shadow:0 4px 10px rgba(0,0,0,.08)}
.rank-card h3{margin:.2em 0;font-size:1em;color:#004080}
.rank-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:10px;background:#f5faff;margin:6px 0}
.rank-item .left{display:flex;align-items:center;gap:8px}
.rank-num{width:26px;height:26px;border-radius:50%;background:#e6f2ff;display:flex;align-items:center;justify-content:center;font-weight:700;color:#0b5dc2}
.rank-chg.up{color:#0b8b2e;font-weight:700}
.rank-chg.down{color:#c01f2f;font-weight:700}
.rank-controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:8px 0}
.rank-controls select{padding:8px 10px;border-radius:8px;border:1px solid #d7e6ff}
.notice{font-size:.85em;color:#666}

/* picks banner */
#picks-banner{font-size:.92em}


/* --- Glossary UI Enhancements --- */
.tabs { position: sticky; top: 0; background: #fff; padding: .5rem; z-index: 5; display: flex; flex-wrap: wrap; gap: .5rem; border-bottom: 1px solid #eee; }
.chip { border: 1px solid #ddd; border-radius: 999px; padding: .35rem .75rem; background: #fafafa; cursor: pointer; font-size: .9rem; }
.chip.active { background: #0ea5e9; color: #fff; border-color: #0ea5e9; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); gap: .9rem; padding: 1rem 0; }
.card { border: 1px solid #e5e7eb; border-radius: .75rem; padding: .85rem; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,.03); cursor: pointer; }
.card:hover { box-shadow: 0 2px 10px rgba(0,0,0,.06); }
.card h4 { margin: 0 0 .25rem; font-size: 1rem; }
.card-meta { display: flex; gap: .5rem; align-items: center; margin-bottom: .25rem; }
.badge { display: inline-block; font-size: .75rem; padding: .15rem .5rem; border-radius: .5rem; background: #eef2ff; color: #334155; border: 1px solid #c7d2fe; }

.modal { position: fixed; inset: 0; background: rgba(0,0,0,.35); display: none; align-items: center; justify-content: center; padding: 1rem; z-index: 50; }
.modal-content { max-width: 900px; width: 100%; max-height: 90vh; overflow: auto; background: #fff; border-radius: .75rem; padding: 1rem 1.2rem; }
.modal-head { display: grid; grid-template-columns: 1fr; gap: .5rem; }
.modal .close { float: right; border: none; background: transparent; font-size: 1.4rem; cursor: pointer; }

#global-search, .toolbar { position: sticky; top: 0; background: #fff; z-index: 6; padding: .5rem 0; }
#global-search input, #g-search { width: 100%; padding: .6rem .75rem; border: 1px solid #e5e7eb; border-radius: .6rem; }
.featured { margin: 1rem 0 1.2rem; padding: .75rem 1rem; background: #f8fafc; border: 1px solid #e5e7eb; border-radius: .75rem; }
.featured-links { display: flex; flex-wrap: wrap; gap: .75rem 1rem; padding-left: 1rem; }
.featured-links li { list-style: disc; }


/* Glossary toolbar improvements */
.glossary-toolbar { display: flex; justify-content: flex-end; margin: .5rem 0; }
.glossary-toolbar input#g-search {
  max-width: 220px;
  font-size: .85rem;
  padding: .35rem .5rem;
}


/* --- Home search removal safeguard --- */
#index #global-search { display: none !important; }

/* --- Glossary toolbar layout --- */
.toolbar {
  position: sticky; top: 0; background: #fff; z-index: 6;
  display: flex; align-items: center; gap: .75rem; padding: .5rem 0;
  border-bottom: 1px solid #f1f5f9;
}
.tabs { flex: 1 1 auto; display: flex; flex-wrap: wrap; gap: .5rem; }
#g-search {
  flex: 0 0 auto;
  width: 240px; max-width: 50vw;
  padding: .45rem .6rem; font-size: .9rem;
  border: 1px solid #e5e7eb; border-radius: .5rem;
}
@media (max-width: 640px){
  #g-search { width: 100%; max-width: 100%; order: -1; margin-bottom: .25rem; }
  .toolbar { flex-wrap: wrap; }
}


/* --- Glossary 2-column layout for better visibility --- */
.glossary-layout {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: 1rem;
}
.glossary-main { min-width: 0; }
.glossary-aside { position: sticky; top: 10px; align-self: start; }

@media (max-width: 1024px){
  .glossary-layout { grid-template-columns: 1fr; }
  .glossary-aside { position: static; order: -1; }
}

.featured { 
  margin: 0; padding: .75rem .9rem; background: #f8fafc; 
  border: 1px solid #e5e7eb; border-radius: .75rem;
}
.featured h2 { font-size: 1.05rem; margin: 0 0 .5rem; }
.featured p { font-size: .9rem; color: #475569; margin: 0 0 .5rem; }
.featured-links { margin: 0; padding-left: 1rem; }
.featured-links li { margin: .2rem 0; }

.toolbar { padding: .4rem 0; gap: .5rem; border-bottom: 1px solid #eef2f7; }
#g-search { width: 220px; padding: .4rem .55rem; font-size: .85rem; }
.chip { padding: .3rem .6rem; font-size: .85rem; }
.grid { gap: .75rem; }


@media (max-width: 768px){
  .doc figure img,
  .explained img { max-width: 92vw; }
}

/* --- Law figures only: responsive & smaller --- */
.laws-page figure img {
  max-width: 680px;
  width: 100%;
  height: auto;
  display: block;
  margin: .25rem auto;
}
@media (max-width: 768px){
  .laws-page figure img { max-width: 92vw; }
}


@media (max-width: 768px){
  .investtheory-page figure img { max-width: 92vw; }
}

/* --- 投資理論ページ専用: 図をさらに小さめに --- */
.investtheory-page figure img {
  max-width: 480px;
  width: 100%;
  height: auto;
  display: block;
  margin: .25rem auto;
}
@media (max-width: 768px){
  .investtheory-page figure img { max-width: 90vw; }
}

/* --- 投資理論ページでは検索バー非表示 --- */
.investtheory-page .search-bar {
  display: none !important;
}
